<html>

<head lang="en">
    <title>首页</title>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="/js/plugins/bootstrap-4.1.1-dist/css/bootstrap.min.css">
    <script src="/js/plugins/jquery/jquery.min.js"></script>
    <script src="/js/plugins/bootstrap-4.1.1-dist/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="/css/font/css/font-awesome.min.css">
    <link rel="stylesheet" href="/css/reset.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/index.css" rel="stylesheet">
    <script src="/js/plugins/jrender/jrender.min.js"></script>
    <script>

        $(function () {

            //获取每周推荐的游记
            $.get('/travels/commends', {type: 2, pageSize: 5}, function (data) {
                $("#travelsCommends").renderValues(data,{
                    "get_href":function (item, value) {
                        $(item).attr("href","/travelContent.html?id="+value);
                    }
                });
                //显示第一个item
                $(".carousel-item:first").addClass("active");
            })

            showComments();


        })

        function showComments() {
            var Mar = document.getElementsByClassName("Marquee")[0];
            var child_div = Mar.getElementsByTagName("div");
            var picH = 50;//移动高度
            var scrollstep = 3;//移动步幅,越大越快
            var scrolltime = 20;//移动频度(毫秒)越大越慢
            var stoptime = 3000;//间断时间(毫秒)
            var tmpH = 0;
            Mar.innerHTML += Mar.innerHTML;
            function start() {
                if (tmpH < picH) {
                    tmpH += scrollstep;
                    if (tmpH > picH)tmpH = picH;
                    Mar.scrollTop = tmpH;
                    setTimeout(start, scrolltime);
                } else {
                    tmpH = 0;
                    Mar.appendChild(child_div[0]);
                    Mar.scrollTop = 0;
                    setTimeout(start, stoptime);
                }
            }

            setTimeout(start, stoptime)
        }
    </script>


</head>


<body>

<div class="body">
    <input type="checkbox" id="menu">

    <label for="menu" class="menu">
        <span><i class="fa fa-user fa-fw fa-2x"></i></span>
        <span><i class="fa fa-chevron-left fa-fw fa-2x" style="color: #3E3C3B"></i></span>
    </label>

    <!-- 侧边栏 -->
    <div class="nav">
        <iframe id="ipage" src="/mine/simpleProfiles.html" frameborder="0" width="90%"></iframe>
    </div>

    <div class="search-head">
        <div class="row nav-search">
            <div class="col-2"></div>
            <div class="col-10">
                <div class="input-group-sm search">
                    <input class="form-control searchBtn" placeholder="搜索旅行攻略、日记和旅游资讯">
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <h6 class="module-title">每周推荐</h6>
        <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
            <div id="travelsCommends">
                <div class="carousel-inner" render-loop="self">
                    <div class="carousel-item">
                        <a render-key="self.travel.id" render-fun="get_href">
                            <img class="d-block w-100" render-src="self.coverUrl" width="100%" height="220px">
                            <span class="recommend" render-html="self.title"></span></a>
                        <div class="recommend-author"><a href="#">
                            <img class="rounded-circle" style="width: 10%;"
                                render-src="self.travel.author.headImgUrl">
                            <span render-html="self.travel.author.nickName"></span>
                        </a>在&nbsp;
                            <span render-html="self.travel.place.name"></span>
                        </div>
                    </div>
                </div>
            </div>
            <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only"></span>
            </a>
            <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only"></span>
            </a>
        </div>
        <hr>

        <div class="row nav-box">
            <div class="col" style="background-color: #DFE823;" align="center">
                <a href="strategyPage.html"><i class="fa fa-plane fa-fw"></i> 找攻略</a>
            </div>
            <div class="col" style="background-color: #7281D5;" align="center">
                <a href="travelPage.html"><i class="fa fa-book fa-fw"></i> 看游记</a>
            </div>
        </div>

        <div class="row dynamic " id="comments">
            <div class="col-1" style="padding: 0px;">
                <img class="rounded" src="/img/topComment.png" style="width: 50px;">
            </div>
            <div class="col">
                <div class="Marquee">
                    <div class="d-flex">
                        <a href="userProfiles.html">
                            <img class="rounded-circle dynamic-head"
                                 src="/upload/6610317b-2077-4bd3-98c7-7d31b6613469.jpg">
                        </a>
                        <a href="strategyComment.html" class="dynamic-detail" data-id="1">
                            <span>叩丁狼</span> 点评了攻略<p>广州攻略</p>
                        </a>
                    </div>
                    <div class="d-flex">
                        <a href="userProfiles.html">
                            <img class="rounded-circle dynamic-head"
                                 src="/upload/23a45130-e59c-4844-bc52-67aed3d57fc1.jpeg">
                        </a>
                        <a href="strategyComment.html" class="dynamic-detail">
                            <span>喵喵</span> 点评了攻略<p>广州攻略</p>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <hr>

    <div class="container">
        <h6 class="module-title">骡窝日报 <a href="#">更多</a></h6>


        <div class="news " id="bigger">
            <a href="#">
                <img width="100%" src="/upload/8aa4b264-ed40-4227-a9d4-a3b0117b8a2f.jpeg">
                <div class="caption">
                    <h5>暑假去哪里旅游凉快？</h5>
                    <p>
                        当然是这个地方了
                    </p>
                </div>
            </a>
        </div>

        <hr>
        <div id="smaller">
            <div style="margin-bottom: 20px">
                <a href="#">
                    <div class="row news-detail">
                        <div class="col-5">
                            <img src="/upload/e6066b48-85ec-48c2-8c1d-4c2ed41fcacc.jpeg">
                        </div>
                        <div class="col-7">
                            <h4>全球最性感的海滩！</h4>
                            <p>男人女人都为之疯狂。 </p>
                        </div>
                    </div>
                </a>
                <hr>
            </div>
            <div style="margin-bottom: 20px">
                <a href="#">
                    <div class="row news-detail">
                        <div class="col-5">
                            <img src="/upload/7e1e1d7c-cdeb-455a-af66-32d021a77138.jpeg">
                        </div>
                        <div class="col-7">
                            <h4>名人眼中旅行的意义</h4>
                            <p>旅行对我来说，是恢复青春活力的源泉。</p>
                        </div>
                    </div>
                </a>
                <hr>
            </div>
        </div>
    </div>
</div>


</body>

</html>